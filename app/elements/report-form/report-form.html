<!--<link rel="import" href="../polymer/polymer.html">-->

<!--
Element providing solution to no problem in particular.

##### Example

    <report-form></report-form>

@element report-form
@blurb Element providing solution to no problem in particular.
@status alpha
@homepage http://chrisekelley.github.io/report-form
-->
<!--<polymer-element name="report-form" attributes="notitle">-->
<!--<polymer-element name="report-form" extends="form">-->
<polymer-element name="report-form" attributes = "theData">

  <template>

    <link rel="stylesheet" href="report-form.css" />
    <link rel="stylesheet" type="text/css" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../bower_components/bootstrap/dist/css/bootstrap-theme.min.css">


      <h1>New Report</h1>

      <p>
          What Services are being provided?
      </p>

      <div role="heading">
          <legend>Select all that apply:</legend>
      </div>

      <core-localstorage id="storage" name="report-form" value="{{theData}}"></core-localstorage>

      <!--<input value="{{this.theData['text']}}">-->
      <!--<input value="{{theData.text}}">-->

      <div center horizontal layout>
          <paper-checkbox id="immunization"></paper-checkbox>
          <!--<input type="checkbox" checked="{{this.theData['immunization']}}" id="immunization">-->
          <!--<input type="checkbox" checked="{{theData.immunization}}" id="immunization">-->
          <div>Immunization</div>
      </div>
      <div center horizontal layout>
          <paper-checkbox id="drug"></paper-checkbox>
          <div>Drug (preventative or treatment</div>
      </div>
      <div center horizontal layout>
          <paper-checkbox id="nutrition"></paper-checkbox>
          <div>Nutritional Support</div>
      </div>
      <div center horizontal layout>
          <paper-checkbox id="school"></paper-checkbox>
          <div>School Enrollment</div>
      </div>

      <!--<button on-click="{{updateModel}}">Update model</button>-->
      <p><a data-role="button" id="submitReportLink" class="btn btn-primary btn-lg" on-click="{{updateModel}}">Continue</a></p>

    <content></content>

  </template>

  <script>

    Polymer('report-form', {

//      theData: {
//          'immunization' : false,
//          'drug' : false,
//          'nutrition' : false,
//          'school' : false
//      },


        /**
       * The `aProp` is a property that does something cool.
       *
       * @property aProp
       * @type bool
       */
      aProp: false,

        /**
         * The `theData` attribute contains the form data.
         *
         * @attribute theData
         * @type string
         */

        ready: function() {
            this.theData = {
                'immunization' : false,
                'drug' : false,
                'nutrition' : false,
                'school' : false,
            }
//            this.store = this.querySelector('core-localstorage');
            this.store = this.$.storage;
        },

        updateModel: function() {
            this.theData.immunization = this.$.immunization.attributes['aria-checked'].value;
            this.theData.drug = this.$.drug.attributes['aria-checked'].value;
            this.theData.nutrition = this.$.nutrition.attributes['aria-checked'].value;
            this.theData.school = this.$.school.attributes['aria-checked'].value;
            this.store.value = this.theData;
            this.store.save();
            console.log("output: " + JSON.stringify(this.theData));
        },

      /**
       * The `task` method does no work at this time.
       *
       * @method task
       * @return {Object} Returns undefined.
       * @param {String} dummy Serves no purpose today.
       */
      task: function(dummy) {
      }

    });

  </script>

</polymer-element>
